#+TITLE: Dev info

#+begin_src elisp
(yxl-org-babel-show-org-toc)
#+end_src

#+RESULTS:
:  - Filetree
:  - Setting up
:  - Technical information
:    - upstream data archive
:    - conda environment
:    - environment variables

* Filetree

#+begin_src shell :results code
eza -T ../
#+end_src

#+RESULTS:
#+begin_src shell
..
├── data
│   ├── artifacts
│   ├── intermediate
│   └── raw
│       └── mr-pubmed-abstracts
│           └── data
│               ├── 211_universities.txt
│               ├── 985_universities.txt
│               ├── countries.csv
│               ├── countries.xlsx
│               ├── missing_pmids.txt
│               ├── nature_index
│               │   ├── 2016-research-leading-countries.csv
│               │   ├── 2017-research-leading-countries.csv
│               │   ├── 2018-research-leading-countries.csv
│               │   ├── 2019-research-leading-countries.csv
│               │   ├── 2020-research-leading-countries.csv
│               │   ├── 2021-research-leading-countries.csv
│               │   ├── 2022-research-leading-countries.csv
│               │   ├── 2023-research-leading-countries.csv
│               │   └── 2024-research-leading-countries.csv
│               ├── predatory_journals.txt
│               ├── pubmed.json
│               ├── pubmed_abstracts.json
│               ├── pubmed_abstracts2.json
│               ├── pubmed_abstracts3.json
│               ├── pubmed_abstracts_new.json
│               ├── pubmed_authors.json
│               ├── pubmed_counts
│               │   ├── PubMed_Timeline_Results_by_Year-3.csv
│               │   ├── PubMed_Timeline_Results_by_Year-4.csv
│               │   ├── PubMed_Timeline_Results_by_Year-5.csv
│               │   ├── PubMed_Timeline_Results_by_Year-6.csv
│               │   ├── PubMed_Timeline_Results_by_Year-7.csv
│               │   └── 'PubMed by Year.csv'
│               ├── pubmed_new.json
│               └── results.RData
├── docs
│   ├── DEV.org
│   ├── environment-bp1.yml
│   ├── environment-non-gpu.yml
│   ├── environment.yml
│   ├── tldraw.tldr
│   └── tom-s-code
│       ├── extract_data.py
│       ├── mrextract_array.sh
│       └── prompts.py
├── Makefile
├── notebooks
│   ├── colab-notebooks
│   │   └── more-models.ipynb
│   ├── more-models-bp1.ipynb
│   ├── more-models.ipynb
│   └── openai
│       └── api-call.ipynb
├── output
├── pyproject.toml
├── README.md
├── scripts
│   ├── extract-data-array-isb.sbatch
│   ├── extract-data-array-new-data-isb.sbatch
│   ├── extract-data-array-new-data.py
│   ├── extract-data-array.py
│   ├── extract-data-pilot-bp1.py
│   ├── extract-data-pilot-bp1.sbatch
│   ├── extract-data-pilot-isb.sbatch
│   ├── extract-data-pilot.py
│   └── jupyter-isb.sbatch
└── src
    ├── local_funcs
    │   ├── setup.py
    │   └── src
    │       ├── local_funcs
    │       │   ├── __pycache__
    │       │   │   └── prompts.cpython-312.pyc
    │       │   ├── funcs.py
    │       │   └── prompts.py
    │       └── local_funcs.egg-info
    │           ├── dependency_links.txt
    │           ├── PKG-INFO
    │           ├── SOURCES.txt
    │           └── top_level.txt
    └── yiutils
        ├── DEVEL.md
        ├── dist
        │   └── yiutils-0.1.0-py3-none-any.whl
        ├── environment.yml
        ├── Makefile
        ├── poetry.lock
        ├── pyproject.toml
        ├── README.md
        ├── scripts
        │   └── sanity.py
        ├── src
        │   └── yiutils
        │       ├── __init__.py
        │       ├── __pycache__
        │       │   ├── __init__.cpython-312.pyc
        │       │   └── project_utils.cpython-312.pyc
        │       ├── failsafe.py
        │       └── project_utils.py
        ├── tests
        │   ├── __init__.py
        │   ├── test_always_true.py
        │   └── test_failsafe.py
        └── TODO.org
#+end_src

* Setting up

git clone; git submodule update --init --recursive

bootstrap conda env

inside conda env and at root, install local packages

- local_funcs (src/local_funcs/src/local_funcs): python -m pip install -e src/local_funcs
- yiutils (src/yiutils/src/yiutils): python -m pip install -e src/yiutils

Add .env

* Technical information
** upstream data archive

RDSF:
/projects/MRC-IEU/research/projects/ieu3/p3/015/working/data/llm-data-extraction

#+begin_src shell :results code
ssh epi-franklin2 'eza -T -L 3 /projects/MRC-IEU/research/projects/ieu3/p3/015/working/data/llm-data-extraction'
#+end_src

#+RESULTS:
#+begin_src shell
/projects/MRC-IEU/research/projects/ieu3/p3/015/working/data/llm-data-extraction
├── data
│   └── mr-pubmed-abstracts
│       └── data
└── output
#+end_src

** conda environment

conda envs
- environment.yml / data-extraction: standard gpu env
- environment-bp1.yml: bp1 gpu env
- environment-non-gpu.yml: non gpu env

** environment variables

.env in repo root

- `HUGGINGFACE_TOKEN`: huggingface token for llama3
- `OPENAI_API_KEY`: OpenAI API key

* analysis

TODO
